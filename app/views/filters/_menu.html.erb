<nav class="header">
  <header class="center">
    <div class="max-width"
      data-controller="dialog" data-action="keydown.esc->dialog#close click@document->dialog#closeOnClickOutside">
      <%= render "filters/menu/button" %>

      <%= tag.dialog class: "fizzy-dialog filter margin-block-start-half popup popup--animated panel flex-column align-start",
            data: {
                  action: "turbo:before-cache@document->dialog#close keydown->navigable-list#navigate filter:changed->navigable-list#reset toggle->filter#filter",
                  controller: "filter navigable-list",
                  dialog_target: "dialog",
                  navigable_list_focus_on_selection_value: false,
                  navigable_list_actionable_items_value: true } do %>
        <%= text_field_tag :search, nil, placeholder: "Filterâ€¦", class: "input input--transparent txt-small", autofocus: true,
              type: "search", autocorrect: "off", autocomplete: "off", data: { "1p-ignore": "true", filter_target: "input", action: "input->filter#filter" } %>

        <%= render "filters/menu/header" %>
        <%= render "filters/menu/custom", user_filtering: user_filtering %>
        <%= render "filters/menu/collections", user_filtering: user_filtering %>
        <%= render "filters/menu/tags", user_filtering: user_filtering %>
        <%= render "filters/menu/users", user_filtering: user_filtering %>
        <%= render "filters/menu/places", user_filtering: user_filtering %>

        <%= render "filters/menu/shortcut_notice" %>
      <% end %>
    </div>
  </header>
</nav>
